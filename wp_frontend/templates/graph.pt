<!DOCTYPE html>

<html lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="base">
  <tal:block metal:fill-slot="headers">
    <link rel="stylesheet"
	  href="${request.static_path('deform:static/css/form.css')}"
	  type="text/css" />
    <link rel="stylesheet"
	  href="${request.static_path('deform:static/css/ui-lightness/jquery-ui-1.8.11.custom.css')}"
	  type="text/css" />
    <link rel="stylesheet"
	  href="${request.static_path('deform:static/css/jquery-ui-timepicker-addon.css')}"
	  type="text/css" />
    <link rel="stylesheet"
	  href="${request.static_path('deform:static/css/beautify.css')}"
	  type="text/css" />
    <script type="text/javascript" 
	    src="${request.static_path('deform:static/scripts/jquery-1.4.2.min.js')}">
    </script>
    <script type="text/javascript" 
	    src="${request.static_path('deform:static/scripts/jquery.form.js')}">
    </script>
    <script type="text/javascript" 
	    src="${request.static_path('deform:static/scripts/deform.js')}">
    </script>
    <script type="text/javascript" 
	    src="${request.static_path('deform:static/scripts/jquery-ui-1.8.11.custom.min.js')}">
    </script>
    <script type="text/javascript" 
	    src="${request.static_path('deform:static/scripts/jquery-ui-timepicker-addon.js')}">
    </script>
    <script type="text/javascript" 
	    src="${request.static_path('deform:static/scripts/jquery.maskedinput-1.2.2.min.js')}">
    </script>
  </tal:block>
  <tal:block metal:fill-slot="title">
    Graph
  </tal:block>
  <tal:block metal:fill-slot="content">
    <aside class="container">
      <span tal:replace="structure form"/>
      <section class="container" tal:switch="graph.plot_url is None">
	<h1 tal:case="True">
	  Couldn't fetch any data to plot.
	</h1>
	<span tal:case="False">
	  <h1>Plot Information</h1>
	  <table>
	    <tbody>
	      <tr>
		<td class="key">Start</td>
		<td>${timespan.start}</td>
	      </tr>
	      <tr>
		<td class="key">End</td>
		<td>${timespan.end}</td> 
	      </tr>
	      <tr>
		<td class="key">Resolution</td>
		<td>${timespan.resolution}</td>
	      </tr>
	    </tbody>
	  </table>
	</span>
      </section>
    </aside>
    <div tal:condition="graph.plot_url is not None"
	 class="container plot main">
      <img src="${graph.plot_url}" />
    </div>
    <script type="text/javascript">
      jQuery(function() {
      deform.load();
      });
    </script>
  </tal:block>
</html>
